---
title: "Different influence measure"
date: "Last compiled on `r format(Sys.time(), '%B, %Y')`"
bibliography: references.bib
output:
  html_document:
    css: tweaks.css
    number_sections: false
    toc_depth: 1
    code_folding: show
    code_download: yes
---

```{r, globalsettings, echo=FALSE, warning=FALSE}
library(knitr)
library(RSiena)
library(ggplot2)
knitr::opts_chunk$set(echo = TRUE)
opts_chunk$set(tidy.opts=list(width.cutoff=100),tidy=TRUE, warning = FALSE, message = FALSE,comment = "#>", cache=TRUE, class.source=c("test"), class.output=c("test2"))
options(width = 100)
rgl::setupKnitr()

colorize <- function(x, color) {sprintf("<span style='color: %s;'>%s</span>", color, x) }

```

```{r klippy, echo=FALSE, include=TRUE}
klippy::klippy(position = c('top', 'right'))
#klippy::klippy(color = 'darkred')
#klippy::klippy(tooltip_message = 'Click to copy', tooltip_success = 'Done')
```

<br>

# Different social influence operationalization

---

We estimate our model with instead of the *avAttHigher*-effect, the *average similarity* effect (avSim) as an alternative operationalization of peer-influence. We use the relative importance concept as describde by @indlekofer2013. We use the 'sienaRI()'-function to calculate the *relative importance of effects* in SAOM.

We use club 1 (N=30).

```{r}
load("clubdata_rsiena.Rdata") 
mydata <- clubdata_rsiena[[1]] 
```

We define the effects-object:

```{r results='hide'}
myeff <- getEffects(mydata)
myeff1 <- includeEffects(myeff, gwespFF, outActSqrt, inPopSqrt, name = "kudonet") 
myeff2 <- setEffect(myeff1, higher, name = "kudonet", interaction1 = "freq_run")
myeff2 <- includeEffects(myeff2, egoX, altX, sameX, name="kudonet", interaction1 = "gender" )
myeff3 <- includeEffects(myeff2, effFrom, name = "time_run", interaction1 = "freq_run")
myeff3 <- includeEffects(myeff3, effFrom, name = "freq_run", interaction1 = "time_run")
myeff3 <- includeEffects(myeff3, effFrom, name = "time_run", interaction1 = "time_other")
myeff3 <- includeEffects(myeff3, effFrom, name = "freq_run", interaction1 = "freq_other")
myeff3 <- includeEffects(myeff3, indeg, name = "freq_run", interaction1 = "kudonet") 
myeff3 <- includeEffects(myeff3, indeg, name = "time_run", interaction1 = "kudonet")
myeff4 <- includeEffects(myeff3, avSim, name = "freq_run", interaction1 = "kudonet")
myeff4 <- includeEffects(myeff3, avSim, name = "time_run", interaction1 = "kudonet")
myeff5 <- includeEffects(myeff3, avAttHigher, name = "freq_run", interaction1 = "kudonet")
myeff5 <- includeEffects(myeff5, avAttHigher, name = "time_run", interaction1 = "kudonet")
```

<br> 

Define the algorithm and estimate both model (one run for now).

```{r eval=F, results='hide'}
myalgorithm <- sienaAlgorithmCreate(projname = "test") 
ans_avSim <- siena07(myalgorithm, data = mydata, effects = myeff4,
                 batch = FALSE, verbose = FALSE, returnDeps = TRUE)
ans_avAttHigher <- siena07(myalgorithm, data = mydata, effects = myeff5,
                 batch = FALSE, verbose = FALSE, returnDeps = TRUE)
```

<br>

SAOM micro-steps are random events with *n* possible outcomes. Let's denote the probabilities with which actor *i* in a micro-step with respect to behavior attribute(s) may change the attribute by $p_{i} (\beta , x) = (p_{i1}(\beta , x), ... , (p_{in}(\beta , x))$. The Indlekofer-Brandes
measures are numerical answers to the question, *How strongly do these probabilities depend on each of the effects?*. 

<br>

----

## References



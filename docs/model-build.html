<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Modeling steps SAOM</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="site_libs/primer-tooltips-1.4.0/build.css" rel="stylesheet" />
<link href="site_libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet" />
<script src="site_libs/klippy-0.0.0.9500/js/klippy.min.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="tweaks.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fas fa-home"></span>
     
  </a>
</li>
<li>
  <a href="prep.html">Preparation</a>
</li>
<li>
  <a href="des.html">Descriptives</a>
</li>
<li>
  <a href="explore.html">Model selection</a>
</li>
<li>
  <a href="meta.html">Meta-analysis</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Robustness checks
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="avSim.html">Different social influence operationalization</a>
    </li>
    <li>
      <a href="robust.html">Different kudos tie classification</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Supplementary material
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="influence-plots.html">avSim vs. avAttHigher + avAttLower</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/robfranken/Strava">
    <span class="fab fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Modeling steps SAOM</h1>
<h4 class="date">Last compiled on november, 2021</h4>

</div>


<script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('right', 'top', 'auto', '1', 'Copy code', 'Copied!');
</script>
<div id="preparation" class="section level1">
<h1>Preparation</h1>
<p>Clean the working environment.</p>
<pre class="r test"><code># clean the working environment
rm(list = ls())</code></pre>
<hr />
<p><br></p>
</div>
<div id="step-1-load-the-r-siena-objects" class="section level1">
<h1>Step 1: Load the R-SIENA objects</h1>
<p>Later on we want to use R-SIENA object list…</p>
<pre class="r test"><code>load(&quot;clubdata_rsiena.Rdata&quot;)</code></pre>
<p>We start with club 1 (N=30)</p>
<pre class="r test"><code>mydata &lt;- clubdata_rsiena[[4]]
mydata</code></pre>
<pre class="test2"><code>#&gt; Dependent variables:  kudonet, time_run, freq_run 
#&gt; Number of observations: 12 
#&gt; 
#&gt; Nodeset                  Actors 
#&gt; Number of nodes              13 
#&gt; 
#&gt; Dependent variable kudonet                                                 
#&gt; Type               oneMode                                                 
#&gt; Observations       12                                                      
#&gt; Nodeset            Actors                                                  
#&gt; Densities          0.1 0.096 0.11 0.11 0.12 0.12 0.1 0.1 0.1 0.15 0.13 0.14
#&gt; 
#&gt; Dependent variable time_run
#&gt; Type               behavior
#&gt; Observations       12      
#&gt; Nodeset            Actors  
#&gt; Range              0 - 7   
#&gt; 
#&gt; Dependent variable freq_run
#&gt; Type               behavior
#&gt; Observations       12      
#&gt; Nodeset            Actors  
#&gt; Range              0 - 5   
#&gt; 
#&gt; Constant covariates:  gender 
#&gt; Changing covariates:  time_other, freq_other, winter 
#&gt; Constant dyadic covariates:  friendship 
#&gt; &quot;uponly&quot;:  kudonet:    periods 2, 4, 9
#&gt; &quot;downonly&quot;:  kudonet:    period 10
#&gt; &quot;downonly&quot;:  freq_run:    period 6</code></pre>
<hr />
<p><br></p>
</div>
<div id="step-2-define-effects" class="section level1">
<h1>Step 2: Define effects</h1>
<div id="modelling-network-kudo-tie-dynamics" class="section level2">
<h2>Modelling network (kudo-tie) dynamics</h2>
<p>We build increasingly complex models. We start with “pure” network effects to the (network) objective function: we add transitivity effect and endogenous degree-related effects. We fix these effects to 0 and test them with the score-type test <span class="citation">Schweinberger (2012)</span> (we test the hypothesis that the parameter estimates are not 0, other than the model assumes).</p>
<pre class="r test"><code>myeff &lt;- getEffects(mydata)
# effectsDocumentation(myeff)</code></pre>
<pre class="r test"><code>myeff1 &lt;- setEffect(myeff, gwespFF, name = &quot;kudonet&quot;, fix = TRUE, test = TRUE, initialValue = 0)
myeff1 &lt;- setEffect(myeff1, outActSqrt, name = &quot;kudonet&quot;, fix = TRUE, test = TRUE, initialValue = 0)
myeff1 &lt;- setEffect(myeff1, inPopSqrt, name = &quot;kudonet&quot;, fix = TRUE, test = TRUE, initialValue = 0)</code></pre>
<p><br></p>
<p>Check the effects object</p>
<pre class="r fold-hide"><code>options(width = 100)  # ignore (this is for the html formatting)
print(myeff1)</code></pre>
<pre class="test2"><code>#&gt;    name     effectName                        include fix   test  initialValue parm
#&gt; 1  kudonet  constant kudonet rate (period 1)  TRUE    FALSE FALSE    0.51338    0  
#&gt; 2  kudonet  constant kudonet rate (period 2)  TRUE    FALSE FALSE    0.34777    0  
#&gt; 3  kudonet  constant kudonet rate (period 3)  TRUE    FALSE FALSE    0.67898    0  
#&gt; 4  kudonet  constant kudonet rate (period 4)  TRUE    FALSE FALSE    0.34777    0  
#&gt; 5  kudonet  constant kudonet rate (period 5)  TRUE    FALSE FALSE    0.51338    0  
#&gt; 6  kudonet  constant kudonet rate (period 6)  TRUE    FALSE FALSE    0.67898    0  
#&gt; 7  kudonet  constant kudonet rate (period 7)  TRUE    FALSE FALSE    1.34140    0  
#&gt; 8  kudonet  constant kudonet rate (period 8)  TRUE    FALSE FALSE    0.67898    0  
#&gt; 9  kudonet  constant kudonet rate (period 9)  TRUE    FALSE FALSE    1.17580    0  
#&gt; 10 kudonet  constant kudonet rate (period 10) TRUE    FALSE FALSE    0.34777    0  
#&gt; 11 kudonet  constant kudonet rate (period 11) TRUE    FALSE FALSE    0.84459    0  
#&gt; 12 kudonet  outdegree (density)               TRUE    FALSE FALSE   -0.93766    0  
#&gt; 13 kudonet  reciprocity                       TRUE    FALSE FALSE    0.00000    0  
#&gt; 14 kudonet  GWESP I -&gt; K -&gt; J (#)             TRUE    TRUE  TRUE     0.00000   69  
#&gt; 15 kudonet  indegree - popularity (sqrt)      TRUE    TRUE  TRUE     0.00000    0  
#&gt; 16 kudonet  outdegree - activity (sqrt)       TRUE    TRUE  TRUE     0.00000    1  
#&gt; 17 time_run rate time_run (period 1)          TRUE    FALSE FALSE    3.00000    0  
#&gt; 18 time_run rate time_run (period 2)          TRUE    FALSE FALSE    1.58974    0  
#&gt; 19 time_run rate time_run (period 3)          TRUE    FALSE FALSE    1.25641    0  
#&gt; 20 time_run rate time_run (period 4)          TRUE    FALSE FALSE    1.76923    0  
#&gt; 21 time_run rate time_run (period 5)          TRUE    FALSE FALSE    3.02564    0  
#&gt; 22 time_run rate time_run (period 6)          TRUE    FALSE FALSE    1.91026    0  
#&gt; 23 time_run rate time_run (period 7)          TRUE    FALSE FALSE    4.83333    0  
#&gt; 24 time_run rate time_run (period 8)          TRUE    FALSE FALSE    1.58974    0  
#&gt; 25 time_run rate time_run (period 9)          TRUE    FALSE FALSE    1.93590    0  
#&gt; 26 time_run rate time_run (period 10)         TRUE    FALSE FALSE    1.73077    0  
#&gt; 27 time_run rate time_run (period 11)         TRUE    FALSE FALSE    1.97436    0  
#&gt; 28 time_run time_run linear shape             TRUE    FALSE FALSE   -0.02090    0  
#&gt; 29 time_run time_run quadratic shape          TRUE    FALSE FALSE    0.00000    0  
#&gt; 30 freq_run rate freq_run (period 1)          TRUE    FALSE FALSE    1.06410    0  
#&gt; 31 freq_run rate freq_run (period 2)          TRUE    FALSE FALSE    0.56154    0  
#&gt; 32 freq_run rate freq_run (period 3)          TRUE    FALSE FALSE    0.57692    0  
#&gt; 33 freq_run rate freq_run (period 4)          TRUE    FALSE FALSE    0.64103    0  
#&gt; 34 freq_run rate freq_run (period 5)          TRUE    FALSE FALSE    0.73077    0  
#&gt; 35 freq_run rate freq_run (period 6)          TRUE    FALSE FALSE    0.33077    0  
#&gt; 36 freq_run rate freq_run (period 7)          TRUE    FALSE FALSE    0.40769    0  
#&gt; 37 freq_run rate freq_run (period 8)          TRUE    FALSE FALSE    0.76923    0  
#&gt; 38 freq_run rate freq_run (period 9)          TRUE    FALSE FALSE    0.57692    0  
#&gt; 39 freq_run rate freq_run (period 10)         TRUE    FALSE FALSE    0.40769    0  
#&gt; 40 freq_run rate freq_run (period 11)         TRUE    FALSE FALSE    0.56154    0  
#&gt; 41 freq_run freq_run linear shape             TRUE    FALSE FALSE   -0.03682    0  
#&gt; 42 freq_run freq_run quadratic shape          TRUE    FALSE FALSE    0.00000    0</code></pre>
<hr />
<p><br></p>
</div>
</div>
<div id="step-3-define-algorithm" class="section level1">
<h1>Step 3: Define algorithm</h1>
<pre class="r fold-hide"><code>myalgorithm &lt;- sienaAlgorithmCreate(projname = &quot;test&quot;)</code></pre>
<pre class="test2"><code>#&gt; If you use this algorithm object, siena07 will create/use an output file test.txt .</code></pre>
<hr />
<p><br></p>
</div>
<div id="step-4-estimate-the-model" class="section level1">
<h1>Step 4: Estimate the model</h1>
<p>Let’s estimate the SAOM.</p>
<pre class="r test"><code>ansM1 &lt;- siena07(myalgorithm, data = mydata, effects = myeff1)
ansM1</code></pre>
<hr />
<p><br></p>
<p>Okay… the tested effects are not 0; so we include them, and run the model. Subsequently, we assess the model’s GOF to additional effects that were not directly modeled: the in- and outdegree distribution and the geodesic distance distribution.</p>
<pre class="r test"><code>myeff2 &lt;- setEffect(myeff1, gwespFF, name = &quot;kudonet&quot;, fix = FALSE, test = FALSE)
myeff2 &lt;- setEffect(myeff2, outActSqrt, name = &quot;kudonet&quot;, fix = FALSE, test = FALSE)
myeff2 &lt;- setEffect(myeff2, inPopSqrt, name = &quot;kudonet&quot;, fix = FALSE, test = FALSE)

ansM2 &lt;- siena07(myalgorithm, data = mydata, effects = myeff2, batch = FALSE, verbose = FALSE, returnDeps = TRUE)

gofi &lt;- sienaGOF(ansM2, IndegreeDistribution, verbose = TRUE, join = TRUE, varName = &quot;kudonet&quot;)

gofo &lt;- sienaGOF(ansM2, OutdegreeDistribution, verbose = TRUE, join = TRUE, varName = &quot;kudonet&quot;)

GeodesicDistribution &lt;- function(i, data, sims, period, groupName, varName, levls = c(1:5, Inf), cumulative = TRUE, 
    ...) {
    x &lt;- networkExtraction(i, data, sims, period, groupName, varName)
    require(sna)
    a &lt;- sna::geodist(symmetrize(x))$gdist
    if (cumulative) {
        gdi &lt;- sapply(levls, function(i) {
            sum(a &lt;= i)
        })
    } else {
        gdi &lt;- sapply(levls, function(i) {
            sum(a == i)
        })
    }
    names(gdi) &lt;- as.character(levls)
    gdi
}

gofgeo &lt;- sienaGOF(ansM2, GeodesicDistribution, verbose = TRUE, join = TRUE, varName = &quot;kudonet&quot;)

plot(gofi)
plot(gofo)
plot(gofgeo)</code></pre>
<div id="section" class="section level2 tabset tabset-fade">
<h2></h2>
<div id="indegree-distribution" class="section level3">
<h3>Indegree distribution</h3>
<pre class="r test"><code>plot(gofi)</code></pre>
</div>
<div id="indegree-distribution-1" class="section level3">
<h3>Indegree distribution</h3>
<pre class="r test"><code>plot(gofi)</code></pre>
<hr />
<p><br></p>
<p>The expected indegree distribution over time significantly differs from the observed indegree distribution over time, with an overal p value of .03. Let’s add effects that model the the indegree distribution more properly.</p>
<p>Perhaps we need to include the out-isolate effect, the effect of ego having outdegree 0. We fix this effect to 0 and score-type test it.</p>
<pre class="r test"><code>myeff3 &lt;- setEffect(myeff2, outIso, name = &quot;kudonet&quot;, fix = TRUE, test = TRUE, initialValue = 0)
ansM3 &lt;- siena07(myalgorithm, data = mydata, effects = myeff3, batch = FALSE, verbose = FALSE, returnDeps = TRUE)
ansM3</code></pre>
<p><br></p>
<p>Apparently, this effect is not significantly different from 0 for this club. It might be necessary to add an effect that directly models the relationship between actors’ indegree and outdegrees (e.g., outPop, reflecting the tendency of high outdegree actors to receive more kudos). Such effects typically improve GOF on degree distribution (and geodesic distribution, which is all right in our case).</p>
<pre class="r test"><code>myeff3 &lt;- setEffect(myeff2, outIso, name = &quot;kudonet&quot;)
ansM3 &lt;- siena07(myalgorithm, data = mydata, effects = myeff3, batch = FALSE, verbose = FALSE, returnDeps = TRUE)</code></pre>
<p><br></p>
<p>The score-test suggests that we should include the outPopSqrt effects in our model. Using the model with outdegree, reciprocity, clustering, in- and outdegree effect, and an effect controlling for the correlation between in- and outdegrees and rerunning GOF diagnostics suggests that the fit of the indegree distribution improves. However, now, the oudegree distribution fit decreases (not shown). So, we leave out the outPop effect, settling for the fact that our GOF may be non-optimal (however, based on the violin-plot visualizations, the simulated data points very much approximate the observed data.)</p>
<pre class="r test"><code>myeff3 &lt;- setEffect(myeff3, outPopSqrt, name = &quot;kudonet&quot;, fix = FALSE, test = FALSE)
ansM3 &lt;- siena07(myalgorithm, data = mydata, effects = myeff3, batch = FALSE, verbose = FALSE, returnDeps = TRUE)

gofi &lt;- sienaGOF(ansM3, IndegreeDistribution, verbose = TRUE, join = TRUE, varName = &quot;kudonet&quot;)
plot(gofi)</code></pre>
<p><br></p>
<p>Now we have controlled for (endogenous) network evolution effects, we proceede including selection effects for actor attributes. We estimate the effect of actors’ (ego and alter) frequency, and the similarity between the two (homophily) on tie formation. Score-type tests indicated that these effects are not 0 (not shown).</p>
<pre class="r test"><code>myeff5 &lt;- includeEffects(myeff3, egoX, altX, simX, name = &quot;kudonet&quot;, interaction1 = &quot;freq_run&quot;)</code></pre>
<p>Last, we add effects on kudo-ties of gender (monadic and dyadic). Score-type tests indicated that these effects are not 0 (not shown).</p>
<pre class="r test"><code>myeff6 &lt;- includeEffects(myeff5, egoX, altX, sameX, name = &quot;kudonet&quot;, interaction1 = &quot;gender&quot;)</code></pre>
<hr />
<p><br></p>
</div>
</div>
<div id="model-the-behavioral-objective-function" class="section level2">
<h2>Model the behavioral objective function</h2>
<p>We now add two influence effects to test our hypotheses on the influence of social support and social comparison. Because we are now modeling the evolution of both the network and the attribute (running behavior), we will add an additional indicator to evaluate GOF; namely, does the model capture the distribution of actors’ attribute levels over time?</p>
<p>We first add an indegree effect on behavior (freq. and vol.): the higher the number of kudo-ties, the greater the probability of increasing the behavior.</p>
<p>We will save the results in a html-table using the siena.table()-function, in the ‘files’-folder in our working directory. We will run the model as many times as necessary, until we reach a convergence ratio of &lt; .25. We use ‘returnDeps=TRUE’ for keeping the simulated data (networks and behavior), for sbusequent GOF assesment.</p>
<pre class="r test"><code>myeff7 &lt;- includeEffects(myeff6, indeg, name = &quot;freq_run&quot;, interaction1 = &quot;kudonet&quot;)
myeff7 &lt;- includeEffects(myeff7, indeg, name = &quot;time_run&quot;, interaction1 = &quot;kudonet&quot;)

try &lt;- 1
ans &lt;- siena07(myalgorithm, data = mydata, effects = myeff7, batch = FALSE, verbose = FALSE, returnDeps = TRUE)

# the following script lets the model re-run until we get a good convergence ratio
while (TRUE) {
    
    if (ans$tconv.max &gt;= 0.25) {
        try &lt;- try + 1
        print(paste(&quot;Try:&quot;, try, sep = &quot; &quot;))
        ans &lt;- siena07(myalgorithm, data = mydata, effects = myeff7, prevAns = ans, returnDeps = TRUE)
        siena.table(ans, type = &quot;html&quot;, tstat = T, d = 2, sig = T, file = paste(&quot;files&quot;, &quot;/&quot;, &quot;ansM&quot;, 
            try, &quot;.html&quot;, sep = &quot;&quot;))
        
    } else {
        siena.table(ans, type = &quot;html&quot;, tstat = T, d = 2, sig = T, file = paste(&quot;files&quot;, &quot;/&quot;, &quot;final&quot;, 
            &quot;.html&quot;, sep = &quot;&quot;))
        print(paste(&quot;Reached convergence ratio of &quot;, ans$tconv.max, sep = &quot;&quot;))
        break
    }
}</code></pre>
<p><br></p>
<p>Second, we add the average upward similarity effect. We also include an effect of outdegree on behavior, to rule out possible confounding of the outdegree effect.</p>
<pre class="r test"><code>myeff8 &lt;- includeEffects(myeff7, avAttHigher, name = &quot;freq_run&quot;, interaction1 = &quot;kudonet&quot;)
myeff8 &lt;- includeEffects(myeff8, avAttHigher, name = &quot;time_run&quot;, interaction1 = &quot;kudonet&quot;)
myeff8 &lt;- includeEffects(myeff8, outdeg, name = &quot;freq_run&quot;, interaction1 = &quot;kudonet&quot;)
myeff8 &lt;- includeEffects(myeff8, outdeg, name = &quot;time_run&quot;, interaction1 = &quot;kudonet&quot;)</code></pre>
<p>Last, we add covariate effects on behavior dynamics (gender, other activities) and cross-effects between frequency and volume. We also tested whether seasonal effects (winter months vs. non-winter months) were at play, but parameter values did not deviate significantly from 0.</p>
<pre class="r test"><code>myeff9 &lt;- includeEffects(myeff8, effFrom, name = &quot;time_run&quot;, interaction1 = &quot;freq_run&quot;)
myeff9 &lt;- includeEffects(myeff9, effFrom, name = &quot;freq_run&quot;, interaction1 = &quot;time_run&quot;)

myeff9 &lt;- includeEffects(myeff9, effFrom, name = &quot;time_run&quot;, interaction1 = &quot;time_other&quot;)
myeff9 &lt;- includeEffects(myeff9, effFrom, name = &quot;freq_run&quot;, interaction1 = &quot;freq_other&quot;)

myeff9 &lt;- includeEffects(myeff9, effFrom, name = &quot;freq_run&quot;, interaction1 = &quot;gender&quot;)
myeff9 &lt;- includeEffects(myeff9, effFrom, name = &quot;time_run&quot;, interaction1 = &quot;gender&quot;)

try &lt;- 1
ans &lt;- siena07(myalgorithm, data = mydata, effects = myeff8, batch = FALSE, verbose = FALSE, returnDeps = TRUE)
siena.table(ans)

# the following script lets the model re-run until we get a good convergence ratio
while (TRUE) {
    
    if (ans$tconv.max &gt;= 0.25) {
        try &lt;- try + 1
        print(paste(&quot;Try:&quot;, try, sep = &quot; &quot;))
        ans &lt;- siena07(myalgorithm, data = mydata, effects = myeff9, prevAns = ans, returnDeps = TRUE)
        siena.table(ans, type = &quot;html&quot;, tstat = T, d = 2, sig = T, file = paste(&quot;files&quot;, &quot;/&quot;, &quot;ansM&quot;, 
            try, &quot;.html&quot;, sep = &quot;&quot;))
        
    } else {
        siena.table(ans, type = &quot;html&quot;, tstat = T, d = 2, sig = T, file = paste(&quot;files&quot;, &quot;/&quot;, &quot;final&quot;, 
            &quot;.html&quot;, sep = &quot;&quot;))
        print(paste(&quot;Reached convergence ratio of &quot;, ans$tconv.max, sep = &quot;&quot;))
        # final &lt;- ans
        break
    }
}

goffreq &lt;- sienaGOF(ans, BehaviorDistribution, levls = 0:7, verbose = TRUE, join = TRUE, varName = &quot;freq_run&quot;)

gofvol &lt;- sienaGOF(ans, BehaviorDistribution, levls = 0:7, verbose = TRUE, join = TRUE, varName = &quot;time_run&quot;)

plot(goffreq)
plot(gofvol)</code></pre>
<p>GOF is adequate for the distribution of running frequency values, but not for the running volume values…</p>
<p><br></p>
<p>We save the siena07 object for this club</p>
<pre class="r test"><code>save(ans, file = &quot;club2_results.RData&quot;)</code></pre>
<p>We repeat the procedure for another club.</p>
<p><br></p>
<p>now try the meta-analysis</p>
<pre class="r test"><code># extract parameter estimates and standard errors</code></pre>
<div id="refs" class="references">
<div id="ref-Schweinberger2012">
<p>Schweinberger, Michael. 2012. “Statistical Modelling of Network Panel Data: Goodness of Fit.” <em>British Journal of Mathematical and Statistical Psychology</em> 65 (2): 263–81. <a href="https://doi.org/10.1111/j.2044-8317.2011.02022.x">https://doi.org/10.1111/j.2044-8317.2011.02022.x</a>.</p>
</div>
</div>
</div>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIk1vZGVsaW5nIHN0ZXBzIFNBT00gICINCmRhdGU6ICJMYXN0IGNvbXBpbGVkIG9uIGByIGZvcm1hdChTeXMudGltZSgpLCAnJUIsICVZJylgIg0KYmlibGlvZ3JhcGh5OiByZWZlcmVuY2VzLmJpYg0Kb3V0cHV0Og0KICBodG1sX2RvY3VtZW50Og0KICAgIGNzczogdHdlYWtzLmNzcw0KICAgIHRvYzogdHJ1ZQ0KICAgIHRvY19mbG9hdDogdHJ1ZQ0KICAgIGNvbGxhcHNlZDogZmFsc2UNCiAgICBudW1iZXJfc2VjdGlvbnM6IGZhbHNlDQogICAgdG9jX2RlcHRoOiAxDQogICAgY29kZV9mb2xkaW5nOiBzaG93DQogICAgY29kZV9kb3dubG9hZDogeWVzDQotLS0NCg0KYGBge3IsIGdsb2JhbHNldHRpbmdzLCBlY2hvPUZBTFNFLCB3YXJuaW5nPUZBTFNFfQ0KbGlicmFyeShrbml0cikNCmxpYnJhcnkoUlNpZW5hKQ0KbGlicmFyeShnZ3Bsb3QyKQ0Ka25pdHI6Om9wdHNfY2h1bmskc2V0KGVjaG8gPSBUUlVFKQ0Kb3B0c19jaHVuayRzZXQodGlkeS5vcHRzPWxpc3Qod2lkdGguY3V0b2ZmPTEwMCksdGlkeT1UUlVFLCB3YXJuaW5nID0gRkFMU0UsIG1lc3NhZ2UgPSBGQUxTRSxjb21tZW50ID0gIiM+IiwgY2FjaGU9VFJVRSwgY2xhc3Muc291cmNlPWMoInRlc3QiKSwgY2xhc3Mub3V0cHV0PWMoInRlc3QyIikpDQpvcHRpb25zKHdpZHRoID0gMTAwKQ0KcmdsOjpzZXR1cEtuaXRyKCkNCg0KY29sb3JpemUgPC0gZnVuY3Rpb24oeCwgY29sb3IpIHtzcHJpbnRmKCI8c3BhbiBzdHlsZT0nY29sb3I6ICVzOyc+JXM8L3NwYW4+IiwgY29sb3IsIHgpIH0NCg0KYGBgDQoNCmBgYHtyIGtsaXBweSwgZWNobz1GQUxTRSwgaW5jbHVkZT1UUlVFfQ0Ka2xpcHB5OjprbGlwcHkocG9zaXRpb24gPSBjKCd0b3AnLCAncmlnaHQnKSkNCiNrbGlwcHk6OmtsaXBweShjb2xvciA9ICdkYXJrcmVkJykNCiNrbGlwcHk6OmtsaXBweSh0b29sdGlwX21lc3NhZ2UgPSAnQ2xpY2sgdG8gY29weScsIHRvb2x0aXBfc3VjY2VzcyA9ICdEb25lJykNCmBgYA0KDQojIFByZXBhcmF0aW9uDQoNCkNsZWFuIHRoZSB3b3JraW5nIGVudmlyb25tZW50Lg0KDQpgYGB7ciwgYXR0ci5vdXRwdXQ9J3N0eWxlPSJtYXgtaGVpZ2h0OiAyMDBweDsiJ30NCiMgY2xlYW4gdGhlIHdvcmtpbmcgZW52aXJvbm1lbnQgDQpybSAobGlzdCA9IGxzKCApKQ0KYGBgDQoNCi0tLS0NCg0KPGJyPg0KDQojIFN0ZXAgMTogTG9hZCB0aGUgUi1TSUVOQSBvYmplY3RzDQoNCkxhdGVyIG9uIHdlIHdhbnQgdG8gdXNlIFItU0lFTkEgb2JqZWN0IGxpc3QuLi4NCg0KYGBge3J9DQpsb2FkKCJjbHViZGF0YV9yc2llbmEuUmRhdGEiKQ0KYGBgDQoNCldlIHN0YXJ0IHdpdGggY2x1YiAxIChOPTMwKQ0KDQpgYGB7cn0NCm15ZGF0YSA8LSBjbHViZGF0YV9yc2llbmFbWzRdXQ0KbXlkYXRhDQpgYGANCg0KLS0tLQ0KDQo8YnI+DQoNCiMgU3RlcCAyOiBEZWZpbmUgZWZmZWN0cw0KDQojIyBNb2RlbGxpbmcgbmV0d29yayAoa3Vkby10aWUpIGR5bmFtaWNzDQoNCldlIGJ1aWxkIGluY3JlYXNpbmdseSBjb21wbGV4IG1vZGVscy4NCldlIHN0YXJ0IHdpdGggInB1cmUiIG5ldHdvcmsgZWZmZWN0cyB0byB0aGUgKG5ldHdvcmspIG9iamVjdGl2ZSBmdW5jdGlvbjogd2UgYWRkIHRyYW5zaXRpdml0eSBlZmZlY3QgYW5kIGVuZG9nZW5vdXMgZGVncmVlLXJlbGF0ZWQgZWZmZWN0cy4gV2UgZml4IHRoZXNlIGVmZmVjdHMgdG8gMCBhbmQgdGVzdCB0aGVtIHdpdGggdGhlIHNjb3JlLXR5cGUgdGVzdCBAU2Nod2VpbmJlcmdlcjIwMTIgKHdlIHRlc3QgdGhlIGh5cG90aGVzaXMgdGhhdCB0aGUgcGFyYW1ldGVyIGVzdGltYXRlcyBhcmUgbm90IDAsIG90aGVyIHRoYW4gdGhlIG1vZGVsIGFzc3VtZXMpLg0KDQpgYGB7ciBlY2hvPVQsIHJlc3VsdHM9J2hpZGUnfQ0KbXllZmYgPC0gZ2V0RWZmZWN0cyhteWRhdGEpDQojZWZmZWN0c0RvY3VtZW50YXRpb24obXllZmYpDQpgYGANCg0KYGBge3IgZWNobz1ULCByZXN1bHRzPSdoaWRlJ30NCm15ZWZmMSA8LSBzZXRFZmZlY3QobXllZmYsIGd3ZXNwRkYsIG5hbWUgPSAia3Vkb25ldCIsIGZpeCA9IFRSVUUsIHRlc3QgPSBUUlVFLCBpbml0aWFsVmFsdWUgPSAwKQ0KbXllZmYxIDwtIHNldEVmZmVjdChteWVmZjEsIG91dEFjdFNxcnQsIG5hbWUgPSAia3Vkb25ldCIsIGZpeCA9IFRSVUUsIHRlc3QgPSBUUlVFLCBpbml0aWFsVmFsdWUgPSAwKQ0KbXllZmYxIDwtIHNldEVmZmVjdChteWVmZjEsIGluUG9wU3FydCwgbmFtZSA9ICJrdWRvbmV0IiwgZml4ID0gVFJVRSwgdGVzdCA9IFRSVUUsIGluaXRpYWxWYWx1ZSA9IDApDQpgYGANCg0KPGJyPg0KDQpDaGVjayB0aGUgZWZmZWN0cyBvYmplY3QNCg0KYGBge3IgY2xhc3Muc291cmNlID0gJ2ZvbGQtaGlkZScgfQ0Kb3B0aW9ucyh3aWR0aCA9IDEwMCkgIyBpZ25vcmUgKHRoaXMgaXMgZm9yIHRoZSBodG1sIGZvcm1hdHRpbmcpDQpwcmludChteWVmZjEpDQpgYGANCg0KLS0tDQoNCjxicj4NCg0KIyBTdGVwIDM6IERlZmluZSBhbGdvcml0aG0NCg0KYGBge3IgY2xhc3Muc291cmNlID0gJ2ZvbGQtaGlkZScgIH0NCm15YWxnb3JpdGhtIDwtIHNpZW5hQWxnb3JpdGhtQ3JlYXRlKHByb2puYW1lID0gInRlc3QiKQ0KYGBgDQoNCi0tLQ0KDQo8YnI+DQoNCiMgU3RlcCA0OiBFc3RpbWF0ZSB0aGUgbW9kZWwNCg0KTGV0J3MgZXN0aW1hdGUgdGhlIFNBT00uDQoNCg0KYGBge3IgZXZhbD0gRiB9DQphbnNNMSA8LSBzaWVuYTA3KG15YWxnb3JpdGhtLCBkYXRhID0gbXlkYXRhLCBlZmZlY3RzID0gbXllZmYxKQ0KYW5zTTENCmBgYA0KDQoNCi0tLQ0KDQo8YnI+DQoNCk9rYXkuLi4gdGhlIHRlc3RlZCBlZmZlY3RzIGFyZSBub3QgMDsgc28gd2UgaW5jbHVkZSB0aGVtLCBhbmQgcnVuIHRoZSBtb2RlbC4gU3Vic2VxdWVudGx5LCB3ZSBhc3Nlc3MgdGhlIG1vZGVsJ3MgR09GIHRvIGFkZGl0aW9uYWwgZWZmZWN0cyB0aGF0IHdlcmUgbm90IGRpcmVjdGx5IG1vZGVsZWQ6IHRoZSBpbi0gYW5kIG91dGRlZ3JlZSBkaXN0cmlidXRpb24gYW5kIHRoZSBnZW9kZXNpYyBkaXN0YW5jZSBkaXN0cmlidXRpb24uDQoNCmBgYHtyIGV2YWw9RiwgcmVzdWx0cz0naGlkZSd9DQpteWVmZjIgPC0gc2V0RWZmZWN0KG15ZWZmMSwgZ3dlc3BGRiwgbmFtZSA9ICJrdWRvbmV0IiwgZml4ID0gRkFMU0UsIHRlc3QgPSBGQUxTRSkNCm15ZWZmMiA8LSBzZXRFZmZlY3QobXllZmYyLCBvdXRBY3RTcXJ0LCBuYW1lID0gImt1ZG9uZXQiLCBmaXggPSBGQUxTRSwgdGVzdCA9IEZBTFNFKQ0KbXllZmYyIDwtIHNldEVmZmVjdChteWVmZjIsIGluUG9wU3FydCwgbmFtZSA9ICJrdWRvbmV0IiwgZml4ID0gRkFMU0UsIHRlc3QgPSBGQUxTRSkNCg0KYW5zTTIgPC0gc2llbmEwNyhteWFsZ29yaXRobSwgZGF0YSA9IG15ZGF0YSwgZWZmZWN0cyA9IG15ZWZmMiwNCiAgICAgICAgICAgICAgICAgYmF0Y2ggPSBGQUxTRSwgdmVyYm9zZSA9IEZBTFNFLCByZXR1cm5EZXBzID0gVFJVRSkNCg0KZ29maSA8LSBzaWVuYUdPRihhbnNNMiwgDQogICAgICAgICAgICAgICAgIEluZGVncmVlRGlzdHJpYnV0aW9uLCANCiAgICAgICAgICAgICAgICAgdmVyYm9zZSA9IFRSVUUsDQogICAgICAgICAgICAgICAgIGpvaW4gPSBUUlVFLCANCiAgICAgICAgICAgICAgICAgdmFyTmFtZSA9ICJrdWRvbmV0IikNCg0KZ29mbyA8LSBzaWVuYUdPRihhbnNNMiwgDQogICAgICAgICAgICAgICAgIE91dGRlZ3JlZURpc3RyaWJ1dGlvbiwgDQogICAgICAgICAgICAgICAgIHZlcmJvc2UgPSBUUlVFLA0KICAgICAgICAgICAgICAgICBqb2luID0gVFJVRSwgDQogICAgICAgICAgICAgICAgIHZhck5hbWUgPSAia3Vkb25ldCIpDQoNCkdlb2Rlc2ljRGlzdHJpYnV0aW9uIDwtIGZ1bmN0aW9uIChpLCBkYXRhLCBzaW1zLCBwZXJpb2QsIGdyb3VwTmFtZSwNCiAgIHZhck5hbWUsIGxldmxzPWMoMTo1LEluZiksIGN1bXVsYXRpdmU9VFJVRSwgLi4uKSB7DQogICAgIHggPC0gbmV0d29ya0V4dHJhY3Rpb24oaSwgZGF0YSwgc2ltcywgcGVyaW9kLCBncm91cE5hbWUsIHZhck5hbWUpDQogICAgIHJlcXVpcmUoc25hKQ0KICAgICBhIDwtIHNuYTo6Z2VvZGlzdChzeW1tZXRyaXplKHgpKSRnZGlzdA0KICAgICBpZiAoY3VtdWxhdGl2ZSkNCiAgICAgew0KICAgICAgIGdkaSA8LSBzYXBwbHkobGV2bHMsIGZ1bmN0aW9uKGkpeyBzdW0oYTw9aSkgfSkNCiAgICAgfQ0KICAgICBlbHNlDQogICAgIHsNCiAgICAgICBnZGkgPC0gc2FwcGx5KGxldmxzLCBmdW5jdGlvbihpKXsgc3VtKGE9PWkpIH0pDQogICAgIH0NCiAgICAgbmFtZXMoZ2RpKSA8LSBhcy5jaGFyYWN0ZXIobGV2bHMpDQogICAgIGdkaQ0KfQ0KDQpnb2ZnZW8gPC0gc2llbmFHT0YoYW5zTTIsIA0KICAgICAgICAgICAgICAgICBHZW9kZXNpY0Rpc3RyaWJ1dGlvbiwgDQogICAgICAgICAgICAgICAgIHZlcmJvc2UgPSBUUlVFLA0KICAgICAgICAgICAgICAgICBqb2luID0gVFJVRSwgDQogICAgICAgICAgICAgICAgIHZhck5hbWUgPSAia3Vkb25ldCIpDQoNCnBsb3QoZ29maSkNCnBsb3QoZ29mbykNCnBsb3QoZ29mZ2VvKQ0KYGBgDQoNCiMjIHsudGFic2V0IC50YWJzZXQtZmFkZX0NCg0KIyMjIEluZGVncmVlIGRpc3RyaWJ1dGlvbg0KYGBge3IgZXZhbD1GLCByZXN1bHRzPSdoaWRlJ30NCnBsb3QoZ29maSkNCmBgYA0KDQojIyMgSW5kZWdyZWUgZGlzdHJpYnV0aW9uDQpgYGB7ciBldmFsPUYsIHJlc3VsdHM9J2hpZGUnfQ0KcGxvdChnb2ZpKQ0KYGBgDQoNCg0KLS0tDQoNCjxicj4NCg0KVGhlIGV4cGVjdGVkIGluZGVncmVlIGRpc3RyaWJ1dGlvbiBvdmVyIHRpbWUgc2lnbmlmaWNhbnRseSBkaWZmZXJzIGZyb20gdGhlIG9ic2VydmVkIGluZGVncmVlIGRpc3RyaWJ1dGlvbiBvdmVyIHRpbWUsIHdpdGggYW4gb3ZlcmFsIHAgdmFsdWUgb2YgLjAzLg0KTGV0J3MgYWRkIGVmZmVjdHMgdGhhdCBtb2RlbCB0aGUgdGhlIGluZGVncmVlIGRpc3RyaWJ1dGlvbiBtb3JlIHByb3Blcmx5LiANCg0KUGVyaGFwcyB3ZSBuZWVkIHRvIGluY2x1ZGUgdGhlIG91dC1pc29sYXRlIGVmZmVjdCwgdGhlIGVmZmVjdCBvZiBlZ28gaGF2aW5nIG91dGRlZ3JlZSAwLg0KV2UgZml4IHRoaXMgZWZmZWN0IHRvIDAgYW5kIHNjb3JlLXR5cGUgdGVzdCBpdC4gDQoNCmBgYHtyIGV2YWw9RiwgcmVzdWx0cz0naGlkZSd9DQpteWVmZjMgPC0gc2V0RWZmZWN0KG15ZWZmMiwgb3V0SXNvLCBuYW1lID0gImt1ZG9uZXQiLCBmaXggPSBUUlVFLCB0ZXN0ID0gVFJVRSwgaW5pdGlhbFZhbHVlID0gMCkNCmFuc00zIDwtIHNpZW5hMDcobXlhbGdvcml0aG0sIGRhdGEgPSBteWRhdGEsIGVmZmVjdHMgPSBteWVmZjMsDQogICAgICAgICAgICAgICAgIGJhdGNoID0gRkFMU0UsIHZlcmJvc2UgPSBGQUxTRSwgcmV0dXJuRGVwcyA9IFRSVUUpDQphbnNNMw0KYGBgDQoNCjxicj4NCg0KQXBwYXJlbnRseSwgdGhpcyBlZmZlY3QgaXMgbm90IHNpZ25pZmljYW50bHkgZGlmZmVyZW50IGZyb20gMCBmb3IgdGhpcyBjbHViLiBJdCBtaWdodCBiZSBuZWNlc3NhcnkgdG8gYWRkIGFuIGVmZmVjdCB0aGF0IGRpcmVjdGx5IG1vZGVscyB0aGUgcmVsYXRpb25zaGlwIGJldHdlZW4gYWN0b3JzJyBpbmRlZ3JlZSBhbmQgb3V0ZGVncmVlcyAoZS5nLiwgb3V0UG9wLCByZWZsZWN0aW5nIHRoZSB0ZW5kZW5jeSBvZiBoaWdoIG91dGRlZ3JlZSBhY3RvcnMgdG8gcmVjZWl2ZSBtb3JlIGt1ZG9zKS4gU3VjaCBlZmZlY3RzIHR5cGljYWxseSBpbXByb3ZlIEdPRiBvbiBkZWdyZWUgZGlzdHJpYnV0aW9uIChhbmQgZ2VvZGVzaWMgZGlzdHJpYnV0aW9uLCB3aGljaCBpcyBhbGwgcmlnaHQgaW4gb3VyIGNhc2UpLiANCg0KYGBge3IgZXZhbD1GLCByZXN1bHRzPSdoaWRlJ30NCm15ZWZmMyA8LSBzZXRFZmZlY3QobXllZmYyLCBvdXRJc28sIG5hbWUgPSAia3Vkb25ldCIpDQphbnNNMyA8LSBzaWVuYTA3KG15YWxnb3JpdGhtLCBkYXRhID0gbXlkYXRhLCBlZmZlY3RzID0gbXllZmYzLA0KICAgICAgICAgICAgICAgICBiYXRjaCA9IEZBTFNFLCB2ZXJib3NlID0gRkFMU0UsIHJldHVybkRlcHMgPSBUUlVFKQ0KYGBgDQoNCjxicj4NCg0KDQpUaGUgc2NvcmUtdGVzdCBzdWdnZXN0cyB0aGF0IHdlIHNob3VsZCBpbmNsdWRlIHRoZSBvdXRQb3BTcXJ0IGVmZmVjdHMgaW4gb3VyIG1vZGVsLiBVc2luZyB0aGUgbW9kZWwgd2l0aCBvdXRkZWdyZWUsIHJlY2lwcm9jaXR5LCBjbHVzdGVyaW5nLCBpbi0gYW5kIG91dGRlZ3JlZSBlZmZlY3QsIGFuZCBhbiBlZmZlY3QgY29udHJvbGxpbmcgZm9yIHRoZSBjb3JyZWxhdGlvbiBiZXR3ZWVuIGluLSBhbmQgb3V0ZGVncmVlcyBhbmQgcmVydW5uaW5nIEdPRiBkaWFnbm9zdGljcyBzdWdnZXN0cyB0aGF0IHRoZSBmaXQgb2YgdGhlIGluZGVncmVlIGRpc3RyaWJ1dGlvbiBpbXByb3Zlcy4gSG93ZXZlciwgbm93LCB0aGUgb3VkZWdyZWUgZGlzdHJpYnV0aW9uIGZpdCBkZWNyZWFzZXMgKG5vdCBzaG93bikuIFNvLCB3ZSBsZWF2ZSBvdXQgdGhlIG91dFBvcCBlZmZlY3QsIHNldHRsaW5nIGZvciB0aGUgZmFjdCB0aGF0IG91ciBHT0YgbWF5IGJlIG5vbi1vcHRpbWFsIChob3dldmVyLCBiYXNlZCBvbiB0aGUgdmlvbGluLXBsb3QgdmlzdWFsaXphdGlvbnMsIHRoZSBzaW11bGF0ZWQgZGF0YSBwb2ludHMgdmVyeSBtdWNoIGFwcHJveGltYXRlIHRoZSBvYnNlcnZlZCBkYXRhLikNCg0KYGBge3IgZXZhbD1GLCByZXN1bHRzPSdoaWRlJ30NCm15ZWZmMyA8LSBzZXRFZmZlY3QobXllZmYzLCBvdXRQb3BTcXJ0LCBuYW1lID0gImt1ZG9uZXQiLCBmaXggPSBGQUxTRSwgdGVzdCA9IEZBTFNFKQ0KYW5zTTMgPC0gc2llbmEwNyhteWFsZ29yaXRobSwgZGF0YSA9IG15ZGF0YSwgZWZmZWN0cyA9IG15ZWZmMywNCiAgICAgICAgICAgICAgICAgYmF0Y2ggPSBGQUxTRSwgdmVyYm9zZSA9IEZBTFNFLCByZXR1cm5EZXBzID0gVFJVRSkNCg0KZ29maSA8LSBzaWVuYUdPRihhbnNNMywgDQogICAgICAgICAgICAgICAgIEluZGVncmVlRGlzdHJpYnV0aW9uLCANCiAgICAgICAgICAgICAgICAgdmVyYm9zZSA9IFRSVUUsDQogICAgICAgICAgICAgICAgIGpvaW4gPSBUUlVFLCANCiAgICAgICAgICAgICAgICAgdmFyTmFtZSA9ICJrdWRvbmV0IikNCnBsb3QoZ29maSkNCmBgYA0KDQoNCg0KPGJyPg0KDQpOb3cgd2UgaGF2ZSAgY29udHJvbGxlZCBmb3IgKGVuZG9nZW5vdXMpIG5ldHdvcmsgZXZvbHV0aW9uIGVmZmVjdHMsIHdlIHByb2NlZWRlIGluY2x1ZGluZyBzZWxlY3Rpb24gZWZmZWN0cyBmb3IgYWN0b3IgYXR0cmlidXRlcy4NCldlIGVzdGltYXRlIHRoZSBlZmZlY3Qgb2YgYWN0b3JzJyAoZWdvIGFuZCBhbHRlcikgZnJlcXVlbmN5LCBhbmQgdGhlIHNpbWlsYXJpdHkgYmV0d2VlbiB0aGUgdHdvIChob21vcGhpbHkpIG9uIHRpZSBmb3JtYXRpb24uIFNjb3JlLXR5cGUgdGVzdHMgaW5kaWNhdGVkIHRoYXQgdGhlc2UgZWZmZWN0cyBhcmUgbm90IDAgKG5vdCBzaG93bikuDQoNCmBgYHtyIGV2YWw9RiwgcmVzdWx0cz0naGlkZSd9DQpteWVmZjUgPC0gaW5jbHVkZUVmZmVjdHMobXllZmYzLCBlZ29YLCBhbHRYLCBzaW1YLCBuYW1lID0gImt1ZG9uZXQiLCBpbnRlcmFjdGlvbjEgPSAiZnJlcV9ydW4iKQ0KDQoNCmBgYA0KDQoNCkxhc3QsIHdlIGFkZCBlZmZlY3RzIG9uIGt1ZG8tdGllcyBvZiBnZW5kZXIgKG1vbmFkaWMgYW5kIGR5YWRpYykuIFNjb3JlLXR5cGUgdGVzdHMgaW5kaWNhdGVkIHRoYXQgdGhlc2UgZWZmZWN0cyBhcmUgbm90IDAgKG5vdCBzaG93bikuDQoNCmBgYHtyIGV2YWw9RiwgcmVzdWx0cz0naGlkZSd9DQpteWVmZjYgPC0gaW5jbHVkZUVmZmVjdHMobXllZmY1LCBlZ29YLCBhbHRYLCBzYW1lWCwgbmFtZT0ia3Vkb25ldCIsIGludGVyYWN0aW9uMSA9ICJnZW5kZXIiICkNCmBgYA0KDQotLS0gDQoNCjxicj4NCg0KIyMgTW9kZWwgdGhlIGJlaGF2aW9yYWwgb2JqZWN0aXZlIGZ1bmN0aW9uDQpXZSBub3cgYWRkIHR3byBpbmZsdWVuY2UgZWZmZWN0cyB0byB0ZXN0IG91ciBoeXBvdGhlc2VzIG9uIHRoZSBpbmZsdWVuY2Ugb2Ygc29jaWFsIHN1cHBvcnQgYW5kIHNvY2lhbCBjb21wYXJpc29uLg0KQmVjYXVzZSB3ZSBhcmUgbm93IG1vZGVsaW5nIHRoZSBldm9sdXRpb24gb2YgYm90aCB0aGUgbmV0d29yayBhbmQgdGhlIGF0dHJpYnV0ZSAocnVubmluZyBiZWhhdmlvciksIHdlIHdpbGwgYWRkIGFuIGFkZGl0aW9uYWwgaW5kaWNhdG9yIHRvIGV2YWx1YXRlIEdPRjsgbmFtZWx5LCBkb2VzIHRoZSBtb2RlbCBjYXB0dXJlIHRoZSBkaXN0cmlidXRpb24gb2YgYWN0b3Jz4oCZIGF0dHJpYnV0ZSBsZXZlbHMgb3ZlciB0aW1lPw0KDQpXZSBmaXJzdCBhZGQgYW4gaW5kZWdyZWUgZWZmZWN0IG9uIGJlaGF2aW9yIChmcmVxLiBhbmQgdm9sLik6IHRoZSBoaWdoZXIgdGhlIG51bWJlciBvZiBrdWRvLXRpZXMsIHRoZSBncmVhdGVyIHRoZSBwcm9iYWJpbGl0eSBvZiBpbmNyZWFzaW5nIHRoZSBiZWhhdmlvci4NCg0KV2Ugd2lsbCBzYXZlIHRoZSByZXN1bHRzIGluIGEgaHRtbC10YWJsZSB1c2luZyB0aGUgc2llbmEudGFibGUoKS1mdW5jdGlvbiwgaW4gdGhlICdmaWxlcyctZm9sZGVyIGluIG91ciB3b3JraW5nIGRpcmVjdG9yeS4gV2Ugd2lsbCBydW4gdGhlIG1vZGVsIGFzIG1hbnkgdGltZXMgYXMgbmVjZXNzYXJ5LCB1bnRpbCB3ZSByZWFjaCBhIGNvbnZlcmdlbmNlIHJhdGlvIG9mIDwgLjI1LiBXZSB1c2UgJ3JldHVybkRlcHM9VFJVRScgZm9yIGtlZXBpbmcgdGhlIHNpbXVsYXRlZCBkYXRhIChuZXR3b3JrcyBhbmQgYmVoYXZpb3IpLCBmb3Igc2J1c2VxdWVudCBHT0YgYXNzZXNtZW50Lg0KDQpgYGB7ciBldmFsPUYsIHJlc3VsdHM9J2hpZGUnfQ0KbXllZmY3IDwtIGluY2x1ZGVFZmZlY3RzKG15ZWZmNiwgaW5kZWcsIG5hbWUgPSAiZnJlcV9ydW4iLCBpbnRlcmFjdGlvbjEgPSAia3Vkb25ldCIpDQpteWVmZjcgPC0gaW5jbHVkZUVmZmVjdHMobXllZmY3LCBpbmRlZywgbmFtZSA9ICJ0aW1lX3J1biIsIGludGVyYWN0aW9uMSA9ICJrdWRvbmV0IikNCg0KdHJ5IDwtIDENCmFucyA8LSBzaWVuYTA3KG15YWxnb3JpdGhtLCBkYXRhID0gbXlkYXRhLCBlZmZlY3RzID0gbXllZmY3LA0KICAgICAgICAgICAgICAgICBiYXRjaCA9IEZBTFNFLCB2ZXJib3NlID0gRkFMU0UsIHJldHVybkRlcHMgPSBUUlVFKQ0KDQojIHRoZSBmb2xsb3dpbmcgc2NyaXB0IGxldHMgdGhlIG1vZGVsIHJlLXJ1biB1bnRpbCB3ZSBnZXQgYSBnb29kIGNvbnZlcmdlbmNlIHJhdGlvDQp3aGlsZSAoVFJVRSl7DQogIA0KICBpZihhbnMkdGNvbnYubWF4ID49IC4yNSl7DQogICAgdHJ5IDwtIHRyeSArIDENCiAgICBwcmludChwYXN0ZSgiVHJ5OiIsIHRyeSwgc2VwPSIgIikpDQogICAgYW5zIDwtIHNpZW5hMDcoIG15YWxnb3JpdGhtLCBkYXRhID0gbXlkYXRhLCBlZmZlY3RzID0gbXllZmY3LCBwcmV2QW5zPSBhbnMsIHJldHVybkRlcHM9VFJVRSkNCiAgICBzaWVuYS50YWJsZShhbnMsIHR5cGU9Imh0bWwiLCB0c3RhdD1ULCBkPTIsIHNpZz1ULCBmaWxlID0gcGFzdGUoImZpbGVzIiwgIi8iLCAiYW5zTSIsIHRyeSwgIi5odG1sIiwgc2VwPSIiKSkNCiAgICANCiAgfWVsc2V7DQogICAgc2llbmEudGFibGUoYW5zLCB0eXBlPSJodG1sIiwgdHN0YXQ9VCwgZD0yLCBzaWc9VCwgZmlsZSA9IHBhc3RlKCJmaWxlcyIsICIvIiwgImZpbmFsIiwgIi5odG1sIiwgc2VwPSIiKSkNCiAgICBwcmludChwYXN0ZSgiUmVhY2hlZCBjb252ZXJnZW5jZSByYXRpbyBvZiAiLCBhbnMkdGNvbnYubWF4LCBzZXAgPSAiIikpDQogICAgYnJlYWsNCiAgfQ0KfQ0KDQpgYGANCg0KPGJyPg0KDQpTZWNvbmQsIHdlIGFkZCB0aGUgYXZlcmFnZSB1cHdhcmQgc2ltaWxhcml0eSBlZmZlY3QuIFdlIGFsc28gaW5jbHVkZSBhbiBlZmZlY3Qgb2Ygb3V0ZGVncmVlIG9uIGJlaGF2aW9yLCB0byBydWxlIG91dCBwb3NzaWJsZSBjb25mb3VuZGluZyBvZiB0aGUgb3V0ZGVncmVlIGVmZmVjdC4NCg0KYGBge3IgZXZhbD1GLCByZXN1bHRzPSdoaWRlJ30NCm15ZWZmOCA8LSBpbmNsdWRlRWZmZWN0cyhteWVmZjcsIGF2QXR0SGlnaGVyLCBuYW1lID0gImZyZXFfcnVuIiwgaW50ZXJhY3Rpb24xID0gImt1ZG9uZXQiKSANCm15ZWZmOCA8LSBpbmNsdWRlRWZmZWN0cyhteWVmZjgsIGF2QXR0SGlnaGVyLCBuYW1lID0gInRpbWVfcnVuIiwgaW50ZXJhY3Rpb24xID0gImt1ZG9uZXQiKQ0KbXllZmY4IDwtIGluY2x1ZGVFZmZlY3RzKG15ZWZmOCwgb3V0ZGVnLCBuYW1lID0gImZyZXFfcnVuIiwgaW50ZXJhY3Rpb24xID0gImt1ZG9uZXQiKSANCm15ZWZmOCA8LSBpbmNsdWRlRWZmZWN0cyhteWVmZjgsIG91dGRlZywgbmFtZSA9ICJ0aW1lX3J1biIsIGludGVyYWN0aW9uMSA9ICJrdWRvbmV0IikNCmBgYA0KDQpMYXN0LCB3ZSBhZGQgY292YXJpYXRlIGVmZmVjdHMgb24gYmVoYXZpb3IgZHluYW1pY3MgKGdlbmRlciwgb3RoZXIgYWN0aXZpdGllcykgYW5kIGNyb3NzLWVmZmVjdHMgYmV0d2VlbiBmcmVxdWVuY3kgYW5kIHZvbHVtZS4NCldlIGFsc28gdGVzdGVkIHdoZXRoZXIgc2Vhc29uYWwgZWZmZWN0cyAod2ludGVyIG1vbnRocyB2cy4gbm9uLXdpbnRlciBtb250aHMpIHdlcmUgYXQgcGxheSwgYnV0IHBhcmFtZXRlciB2YWx1ZXMgZGlkIG5vdCBkZXZpYXRlIHNpZ25pZmljYW50bHkgZnJvbSAwLg0KDQoNCmBgYHtyIGV2YWw9RiwgcmVzdWx0cz0naGlkZSd9DQpteWVmZjkgPC0gaW5jbHVkZUVmZmVjdHMobXllZmY4LCBlZmZGcm9tLCBuYW1lID0gInRpbWVfcnVuIiwgaW50ZXJhY3Rpb24xID0gImZyZXFfcnVuIikNCm15ZWZmOSA8LSBpbmNsdWRlRWZmZWN0cyhteWVmZjksIGVmZkZyb20sIG5hbWUgPSAiZnJlcV9ydW4iLCBpbnRlcmFjdGlvbjEgPSAidGltZV9ydW4iKQ0KDQpteWVmZjkgPC0gaW5jbHVkZUVmZmVjdHMobXllZmY5LCBlZmZGcm9tLCBuYW1lID0gInRpbWVfcnVuIiwgaW50ZXJhY3Rpb24xID0gInRpbWVfb3RoZXIiKQ0KbXllZmY5IDwtIGluY2x1ZGVFZmZlY3RzKG15ZWZmOSwgZWZmRnJvbSwgbmFtZSA9ICJmcmVxX3J1biIsIGludGVyYWN0aW9uMSA9ICJmcmVxX290aGVyIikNCg0KbXllZmY5IDwtIGluY2x1ZGVFZmZlY3RzKG15ZWZmOSwgZWZmRnJvbSwgbmFtZSA9ICJmcmVxX3J1biIsIGludGVyYWN0aW9uMSA9ICJnZW5kZXIiKQ0KbXllZmY5IDwtIGluY2x1ZGVFZmZlY3RzKG15ZWZmOSwgZWZmRnJvbSwgbmFtZSA9ICJ0aW1lX3J1biIsIGludGVyYWN0aW9uMSA9ICJnZW5kZXIiKQ0KDQp0cnkgPC0gMQ0KYW5zIDwtIHNpZW5hMDcobXlhbGdvcml0aG0sIGRhdGEgPSBteWRhdGEsIGVmZmVjdHMgPSBteWVmZjgsDQogICAgICAgICAgICAgICAgIGJhdGNoID0gRkFMU0UsIHZlcmJvc2UgPSBGQUxTRSwgcmV0dXJuRGVwcyA9IFRSVUUpDQpzaWVuYS50YWJsZShhbnMpDQoNCiMgdGhlIGZvbGxvd2luZyBzY3JpcHQgbGV0cyB0aGUgbW9kZWwgcmUtcnVuIHVudGlsIHdlIGdldCBhIGdvb2QgY29udmVyZ2VuY2UgcmF0aW8NCndoaWxlIChUUlVFKXsNCiAgDQogIGlmKGFucyR0Y29udi5tYXggPj0gLjI1KXsNCiAgICB0cnkgPC0gdHJ5ICsgMQ0KICAgIHByaW50KHBhc3RlKCJUcnk6IiwgdHJ5LCBzZXA9IiAiKSkNCiAgICBhbnMgPC0gc2llbmEwNyggbXlhbGdvcml0aG0sIGRhdGEgPSBteWRhdGEsIGVmZmVjdHMgPSBteWVmZjksIHByZXZBbnM9IGFucywgcmV0dXJuRGVwcz1UUlVFKQ0KICAgIHNpZW5hLnRhYmxlKGFucywgdHlwZT0iaHRtbCIsIHRzdGF0PVQsIGQ9Miwgc2lnPVQsIGZpbGUgPSBwYXN0ZSgiZmlsZXMiLCAiLyIsICJhbnNNIiwgdHJ5LCAiLmh0bWwiLCBzZXA9IiIpKQ0KICAgIA0KICB9ZWxzZXsNCiAgICBzaWVuYS50YWJsZShhbnMsIHR5cGU9Imh0bWwiLCB0c3RhdD1ULCBkPTIsIHNpZz1ULCBmaWxlID0gcGFzdGUoImZpbGVzIiwgIi8iLCAiZmluYWwiLCAiLmh0bWwiLCBzZXA9IiIpKQ0KICAgIHByaW50KHBhc3RlKCJSZWFjaGVkIGNvbnZlcmdlbmNlIHJhdGlvIG9mICIsIGFucyR0Y29udi5tYXgsIHNlcCA9ICIiKSkNCiAgICAjZmluYWwgPC0gYW5zDQogICAgYnJlYWsNCiAgfQ0KfQ0KDQpnb2ZmcmVxIDwtIHNpZW5hR09GKGFucywNCkJlaGF2aW9yRGlzdHJpYnV0aW9uLCBsZXZscyA9IDA6NywNCnZlcmJvc2UgPSBUUlVFLCBqb2luID0gVFJVRSwNCnZhck5hbWUgPSAiZnJlcV9ydW4iKQ0KDQpnb2Z2b2wgPC0gc2llbmFHT0YoYW5zLA0KQmVoYXZpb3JEaXN0cmlidXRpb24sIGxldmxzID0gMDo3LA0KdmVyYm9zZSA9IFRSVUUsIGpvaW4gPSBUUlVFLA0KdmFyTmFtZSA9ICJ0aW1lX3J1biIpDQoNCnBsb3QoZ29mZnJlcSkNCnBsb3QoZ29mdm9sKQ0KYGBgDQoNCkdPRiBpcyBhZGVxdWF0ZSBmb3IgdGhlIGRpc3RyaWJ1dGlvbiBvZiBydW5uaW5nIGZyZXF1ZW5jeSB2YWx1ZXMsIGJ1dCBub3QgZm9yIHRoZSBydW5uaW5nIHZvbHVtZSB2YWx1ZXMuLi4NCg0KPGJyPg0KDQpXZSBzYXZlIHRoZSBzaWVuYTA3IG9iamVjdCBmb3IgdGhpcyBjbHViDQpgYGB7ciBldmFsPUYsIHJlc3VsdHM9J2hpZGUnfQ0Kc2F2ZShhbnMsIGZpbGU9ICJjbHViMl9yZXN1bHRzLlJEYXRhIikgDQpgYGANCg0KV2UgcmVwZWF0IHRoZSBwcm9jZWR1cmUgZm9yIGFub3RoZXIgY2x1Yi4gDQoNCg0KPGJyPg0KDQpub3cgdHJ5IHRoZSBtZXRhLWFuYWx5c2lzDQoNCmBgYHtyfQ0KI2V4dHJhY3QgcGFyYW1ldGVyIGVzdGltYXRlcyBhbmQgc3RhbmRhcmQgZXJyb3JzDQoNCmBgYA0KDQoNCg0KDQoNCg==</div>
<style>
.center {
  text-align: center;
  color: red;
}
</style>

<hr>
<br>
<p class="center">Copyright &copy; 2021 Rob Franken</p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("model build.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
